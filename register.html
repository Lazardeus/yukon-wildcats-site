<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Create Account - Yukon Wildcats Contracting</title>
  <link rel="stylesheet" href="css/style.css?v=20251110b" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script defer src="js/particles-config.js?v=20251110b"></script>
  <script defer src="js/script.js?v=20251110b"></script>
</head>
<body>
  <div id="particles-js"></div>
  <a href="index.html" class="back-link"><i class="fas fa-arrow-left"></i> Back to Home</a>
  <main style="max-width:460px;margin:3rem auto;padding:2rem;background:rgba(0,0,0,0.7);border:1px solid rgba(255,215,0,0.3);border-radius:16px;backdrop-filter:blur(6px);">
    <h1 style="text-align:center;color:#ffd700;font-size:1.8rem;margin-bottom:.4rem;">Create Client Account</h1>
    <p style="text-align:center;color:#ccc;font-size:.9rem;margin-bottom:1.5rem;">Register to track service requests & quotes</p>
    <div id="reg-alert" aria-live="polite" style="display:none;margin-bottom:1rem;padding:.8rem 1rem;border-radius:8px;font-size:.85rem;font-weight:600"></div>
    <form id="registerForm" novalidate>
      <label style="display:block;color:#ffd700;font-size:.85rem;margin-bottom:.4rem;" for="regUser">Username</label>
      <input id="regUser" name="regUser" type="text" required placeholder="Choose a username" style="width:100%;padding:.9rem;background:rgba(255,255,255,0.08);border:1px solid rgba(255,215,0,0.3);border-radius:8px;color:#fff;margin-bottom:1rem;" />
      <label style="display:block;color:#ffd700;font-size:.85rem;margin-bottom:.4rem;" for="regEmail">Email</label>
      <input id="regEmail" name="regEmail" type="email" required placeholder="you@example.com" style="width:100%;padding:.9rem;background:rgba(255,255,255,0.08);border:1px solid rgba(255,215,0,0.3);border-radius:8px;color:#fff;margin-bottom:1rem;" />
      <label style="display:block;color:#ffd700;font-size:.85rem;margin-bottom:.4rem;" for="regPass">Password</label>
      <input id="regPass" name="regPass" type="password" required placeholder="Minimum 6 characters" style="width:100%;padding:.9rem;background:rgba(255,255,255,0.08);border:1px solid rgba(255,215,0,0.3);border-radius:8px;color:#fff;margin-bottom:1rem;" />
      <button type="submit" style="background:#ffd700;color:#111;font-weight:700;width:100%;padding:1rem;border:none;border-radius:10px;cursor:pointer;box-shadow:0 4px 15px rgba(255,215,0,0.4);transition:.3s;">Create Account</button>
      <div style="text-align:center;margin-top:0.8rem;font-size:.85rem;">
        <a href="login.html" style="color:#ffd700;">Already have an account? Login</a>
      </div>
    </form>
  </main>
  <script>
    (function(){
      const form=document.getElementById('registerForm');
      const alertBox=document.getElementById('reg-alert');
      function show(msg,type){alertBox.textContent=msg;alertBox.style.display='block';alertBox.style.background=type==='success'?'rgba(40,167,69,0.15)':'rgba(220,53,69,0.15)';alertBox.style.border='1px solid '+(type==='success'?'#28a745':'#dc3545');alertBox.style.color=type==='success'?'#28a745':'#dc3545';}
      form.addEventListener('submit',async(e)=>{e.preventDefault();alertBox.style.display='none';
        const username=document.getElementById('regUser').value.trim();
        const email=document.getElementById('regEmail').value.trim();
        const password=document.getElementById('regPass').value;
        if(!username||!email||!password){show('All fields required');return;}
        try{
          const res=await fetch('/api/client/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,email,password})});
          const data=await res.json().catch(()=>({message:'Server error'}));
          if(!res.ok){show(data.message||'Registration failed');return;}
          show('Account created! Redirecting to login...','success');
          setTimeout(()=>{window.location.href='login.html';},1000);
        }catch(err){console.error(err);show('Network/server error');}
      });
    })();
  </script>
</body>
</html>